\documentclass[12pt]{cdblatex}
\usepackage{exercises}

\begin{document}

% --------------------------------------------------------------------------------------------
\section*{Exercise 1.3 Christoffel symbol and dg with a single rule}

\begin{cadabra}
   {a,b,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u#}::Indices(position=independent).

   g_{a b}::Metric.
   g_{a}^{b}::KroneckerDelta.

   \partial{#}::PartialDerivative.

   GammaU := \Gamma^{a}_{b c} -> (1/2) g^{a d} (  \partial_{b}{g_{d c}}
                                                + \partial_{c}{g_{b d}}
                                                - \partial_{d}{g_{b c}} ).

   GammaD := \Gamma_{a b c} -> g_{a d} \Gamma^{d}_{b c}.              # cdb (ex-0103.101,GammaD)

   substitute          (GammaD, GammaU)                               # cdb (ex-0103.102,GammaD)  # requires Indices(position=independent)
   distribute          (GammaD)                                       # cdb (ex-0103.103,GammaD)
   eliminate_metric    (GammaD)                                       # cdb (ex-0103.104,GammaD)
   eliminate_kronecker (GammaD)                                       # cdb (ex-0103.105,GammaD)

   expr := \Gamma_{a b c} + \Gamma_{b a c} - \partial_{c}{g_{a b}}.   # cdb (ex-0103.201,expr)

   substitute          (expr, GammaD)                                 # cdb (ex-0103.202,expr)
   canonicalise        (expr)                                         # cdb (ex-0103.203,expr)
\end{cadabra}

\clearpage

\begin{gather*}
   \Cdb{ex-0103.101}\\
   \Cdb{ex-0103.102}\\
   \Cdb{ex-0103.103}\\
   \Cdb{ex-0103.104}\\
   \Cdb{ex-0103.105}
\end{gather*}

\begin{align*}
   \cdb{ex-0103.201} &= \Cdb{ex-0103.202}\\
                     &= \Cdb{ex-0103.203}
\end{align*}

\clearpage

% --------------------------------------------------------------------------------------------
\section*{Exercise 1.3 Repeat but without {\tt position=independent}}

\begin{cadabra}
   {a,b,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u#}::Indices.

   g_{a b}::Metric.
   g_{a}^{b}::KroneckerDelta.

   \partial{#}::PartialDerivative.

   GammaU := \Gamma^{a}_{b c} -> (1/2) g^{a d} (  \partial_{b}{g_{d c}}
                                                + \partial_{c}{g_{b d}}
                                                - \partial_{d}{g_{b c}} ).

   GammaD := \Gamma_{a b c} -> g_{a d} \Gamma^{d}_{b c}.              # cdb (ex-0103.301,GammaD)

   substitute          (GammaD, GammaU)                               # cdb (ex-0103.302,GammaD)
   distribute          (GammaD)                                       # cdb (ex-0103.303,GammaD)
   eliminate_metric    (GammaD)                                       # cdb (ex-0103.304,GammaD)
   eliminate_kronecker (GammaD)                                       # cdb (ex-0103.305,GammaD)

   expr := \Gamma_{a b c} + \Gamma_{b a c} - \partial_{c}{g_{a b}}.   # cdb (ex-0103.401,expr)

   substitute          (expr, GammaD)                                 # cdb (ex-0103.402,expr)
   canonicalise        (expr)                                         # cdb (ex-0103.403,expr)
\end{cadabra}

\clearpage

\begin{gather*}
   \Cdb{ex-0103.301}\\
   \Cdb{ex-0103.302}\\
   \Cdb{ex-0103.303}\\
   \Cdb{ex-0103.304}\\
   \Cdb{ex-0103.305}
\end{gather*}

\begin{align*}
   \cdb{ex-0103.401} &= \Cdb{ex-0103.402}\\
                     &= \Cdb{ex-0103.403}
\end{align*}

\end{document}
