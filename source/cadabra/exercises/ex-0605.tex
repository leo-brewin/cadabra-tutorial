\documentclass[12pt]{cdblatex}
\usepackage{exercises}
\usepackage{fancyhdr}
\usepackage{footer}

\begin{document}

% --------------------------------------------------------------------------------------------
\section*{Exercise 6.5 Schwarzschild spacetime in isotropic coordinates}

\begin{cadabra}
   {t, r, \theta, \varphi}::Coordinate.
   {a,b,c,d,e,f,g,h#}::Indices(values={t, r, \theta, \varphi}, position=independent).

   \partial{#}::PartialDerivative.

   g^{a b}::InverseMetric.  # essential when using complete (gab, $g^{a b}$)

   Gamma := \Gamma^{a}_{b c} -> 1/2 g^{a d} (   \partial_{b}{g_{d c}}
                                              + \partial_{c}{g_{b d}}
                                              - \partial_{d}{g_{b c}}).

   Rabcd := R^{a}_{b c d} ->   \partial_{c}{\Gamma^{a}_{b d}}
                             - \partial_{d}{\Gamma^{a}_{b c}}
                             + \Gamma^{e}_{b d} \Gamma^{a}_{c e}
                             - \Gamma^{e}_{b c} \Gamma^{a}_{d e}.

   Rab := R_{a b} -> R^{c}_{a c b}.

   gab := { g_{t t}            = -((2*r-m)/(2*r+m))**2,
            g_{r r}            = (1+m/(2*r))**4,
            g_{\theta\theta}   = r**2 (1+m/(2*r))**4,
            g_{\varphi\varphi} = r**2 \sin(\theta)**2 (1+m/(2*r))**4}.  # cdb(ex-0605.101,gab)

   complete   (gab, $g^{a b}$)                                          # cdb(ex-0605.102,gab)

   substitute (Rabcd, Gamma)
   substitute (Rab, Rabcd)

   evaluate   (Gamma, gab, rhsonly=True)                                # cdb(ex-0605.103,Gamma)
   evaluate   (Rabcd, gab, rhsonly=True)                                # cdb(ex-0605.104,Rabcd)
   evaluate   (Rab,   gab, rhsonly=True)                                # cdb(ex-0605.105,Rab)
\end{cadabra}

\clearpage

\begin{dgroup*}
   \Dmath*{\Cdb*{ex-0605.101}}
   \Dmath*{\Cdb*[\hskip3cm\hfill]{ex-0605.102}}
   \Dmath*{\Cdb*{ex-0605.103}}
   \Dmath*{\Cdb*{ex-0605.104}}
   \Dmath*{\Cdb*{ex-0605.105}}
\end{dgroup*}

\end{document}
